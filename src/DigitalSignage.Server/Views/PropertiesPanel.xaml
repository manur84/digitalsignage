<UserControl x:Class="DigitalSignage.Server.Views.PropertiesPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:DigitalSignage.Server.Converters"
             xmlns:controls="clr-namespace:DigitalSignage.Server.Controls"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="300">

    <Border Background="White" BorderBrush="#CCCCCC" BorderThickness="1,0,0,0">
        <ScrollViewer>
            <StackPanel Margin="12">
                <TextBlock Text="Properties" FontSize="18" FontWeight="Bold" Margin="0,0,0,12"/>

                <!-- Layout Properties -->
                <TextBlock Text="Layout" FontWeight="SemiBold" Margin="0,8,0,4"/>
                <TextBlock Text="Name:" Margin="0,4,0,2"/>
                <TextBox Text="{Binding CurrentLayout.Name, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="Resolution:" Margin="0,8,0,2"/>
                <StackPanel Orientation="Horizontal">
                    <TextBox Width="80" Text="{Binding CurrentLayout.Resolution.Width, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,4,0"/>
                    <TextBlock Text="×" Margin="4,0" VerticalAlignment="Center"/>
                    <TextBox Width="80" Text="{Binding CurrentLayout.Resolution.Height, UpdateSourceTrigger=PropertyChanged}" Margin="4,0,0,0"/>
                </StackPanel>

                <TextBlock Text="Background:" Margin="0,12,0,4"/>
                <controls:ColorPicker SelectedColor="{Binding CurrentLayout.BackgroundColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                <Separator Margin="0,16"/>

                <!-- Selected Element Properties -->
                <TextBlock Text="Selected Element" FontWeight="SemiBold" Margin="0,8,0,4"/>

                <!-- Show when no element is selected -->
                <TextBlock Text="No element selected"
                          Foreground="Gray"
                          Margin="0,8">
                    <TextBlock.Visibility>
                        <Binding Path="SelectedElement">
                            <Binding.Converter>
                                <local:NullToVisibilityConverter/>
                            </Binding.Converter>
                        </Binding>
                    </TextBlock.Visibility>
                </TextBlock>

                <!-- Show when element is selected -->
                <StackPanel>
                    <StackPanel.Visibility>
                        <Binding Path="SelectedElement">
                            <Binding.Converter>
                                <local:NullToVisibilityConverter Invert="True"/>
                            </Binding.Converter>
                        </Binding>
                    </StackPanel.Visibility>

                    <TextBlock Text="Name:" Margin="0,4,0,2"/>
                    <TextBox Text="{Binding SelectedElement.Name, UpdateSourceTrigger=PropertyChanged}"/>

                    <TextBlock Text="Position:" Margin="0,12,0,4"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="X:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="1" Text="{Binding SelectedElement.Position.X, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,8,0"/>
                        <TextBlock Grid.Column="2" Text="Y:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="3" Text="{Binding SelectedElement.Position.Y, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>

                    <TextBlock Text="Size:" Margin="0,12,0,4"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="W:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="1" Text="{Binding SelectedElement.Size.Width, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,8,0"/>
                        <TextBlock Grid.Column="2" Text="H:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBox Grid.Column="3" Text="{Binding SelectedElement.Size.Height, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>

                    <!-- Auto-Size Button for Text Elements -->
                    <Button Content="Auto-Size Text"
                            Command="{Binding AutoSizeTextCommand}"
                            Margin="0,4,0,0"
                            Padding="8,4"
                            ToolTip="Automatically adjust size to fit text content">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedElement.Type}" Value="text">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <TextBlock Text="Z-Index:" Margin="0,12,0,4"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBox Width="60" Text="{Binding SelectedElement.ZIndex, UpdateSourceTrigger=PropertyChanged}"/>
                        <Button Content="▲" Command="{Binding MoveElementUpCommand}" Margin="8,0,4,0" Padding="8,2"/>
                        <Button Content="▼" Command="{Binding MoveElementDownCommand}" Padding="8,2"/>
                    </StackPanel>

                    <TextBlock Text="Opacity:" Margin="0,12,0,4"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Slider Grid.Column="0"
                                Minimum="0"
                                Maximum="1"
                                Value="{Binding SelectedElement.Opacity, FallbackValue=1, UpdateSourceTrigger=PropertyChanged}"
                                TickFrequency="0.1"
                                IsSnapToTickEnabled="False"
                                Margin="0,0,8,0"/>
                        <TextBox Grid.Column="1"
                                Width="60"
                                Text="{Binding SelectedElement.Opacity, FallbackValue=1, StringFormat=F2, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>

                    <TextBlock Text="Visibility:" Margin="0,12,0,4"/>
                    <CheckBox Content="Visible" IsChecked="{Binding SelectedElement.Visible, FallbackValue=True}" Margin="0,4,0,0"/>

                    <Separator Margin="0,16"/>

                    <!-- Advanced Properties -->
                    <TextBlock Text="Advanced" FontWeight="SemiBold" Margin="0,8,0,8"/>

                    <!-- Border Radius -->
                    <TextBlock Text="Border Radius:" Margin="0,4,0,2"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Slider Grid.Column="0"
                                Minimum="0"
                                Maximum="50"
                                Value="{Binding SelectedElement[BorderRadius], FallbackValue=0, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                TickFrequency="1"
                                IsSnapToTickEnabled="True"
                                Margin="0,0,8,0"/>
                        <TextBox Grid.Column="1"
                                Width="60"
                                Text="{Binding SelectedElement[BorderRadius], FallbackValue=0, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    </Grid>

                    <!-- Shadow -->
                    <TextBlock Text="Shadow:" Margin="0,12,0,4"/>
                    <CheckBox Content="Enable Shadow"
                             IsChecked="{Binding SelectedElement[EnableShadow], FallbackValue=False, Mode=TwoWay}"
                             Margin="0,4,0,8"/>

                    <StackPanel Visibility="{Binding SelectedElement[EnableShadow], Converter={StaticResource NullToVisibilityConverter}, ConverterParameter=Invert, FallbackValue=Collapsed}">
                        <TextBlock Text="Shadow Color:" Margin="0,4,0,2"/>
                        <controls:ColorPicker SelectedColor="{Binding SelectedElement[ShadowColor], FallbackValue=#000000, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>

                        <TextBlock Text="Shadow Blur:" Margin="0,8,0,2"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Slider Grid.Column="0"
                                    Minimum="0"
                                    Maximum="50"
                                    Value="{Binding SelectedElement[ShadowBlur], FallbackValue=5, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                    TickFrequency="1"
                                    IsSnapToTickEnabled="True"
                                    Margin="0,0,8,0"/>
                            <TextBox Grid.Column="1"
                                    Width="60"
                                    Text="{Binding SelectedElement[ShadowBlur], FallbackValue=5, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                        </Grid>

                        <TextBlock Text="Shadow Offset:" Margin="0,8,0,4"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="X:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBox Grid.Column="1" Text="{Binding SelectedElement[ShadowOffsetX], FallbackValue=2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="0,0,8,0"/>
                            <TextBlock Grid.Column="2" Text="Y:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                            <TextBox Grid.Column="3" Text="{Binding SelectedElement[ShadowOffsetY], FallbackValue=2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                        </Grid>
                    </StackPanel>

                    <Separator Margin="0,16"/>

                    <!-- Text Element Properties -->
                    <StackPanel>
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedElement.Type}" Value="text">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock Text="Text Properties" FontWeight="SemiBold" Margin="0,0,0,8"/>

                        <TextBlock Text="Content:" Margin="0,4,0,2"/>
                        <TextBox Text="{Binding SelectedElement[Content], UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                Height="60"
                                TextWrapping="Wrap"
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"/>

                        <TextBlock Text="Font Size:" Margin="0,12,0,4"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Slider Grid.Column="0"
                                   Minimum="8"
                                   Maximum="144"
                                   Value="{Binding SelectedElement[FontSize], FallbackValue=24, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   TickFrequency="4"
                                   IsSnapToTickEnabled="True"
                                   Margin="0,0,8,0"/>
                            <TextBox Grid.Column="1"
                                    Width="60"
                                    Text="{Binding SelectedElement[FontSize], FallbackValue=24, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                        </Grid>

                        <TextBlock Text="Font Style:" Margin="0,12,0,4"/>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="Bold" Margin="0,0,12,0">
                                <CheckBox.IsChecked>
                                    <Binding Path="SelectedElement[FontWeight]" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                                        <Binding.Converter>
                                            <local:FontWeightToBoolConverter/>
                                        </Binding.Converter>
                                    </Binding>
                                </CheckBox.IsChecked>
                            </CheckBox>
                            <CheckBox Content="Italic">
                                <CheckBox.IsChecked>
                                    <Binding Path="SelectedElement[FontStyle]" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                                        <Binding.Converter>
                                            <local:FontStyleToBoolConverter/>
                                        </Binding.Converter>
                                    </Binding>
                                </CheckBox.IsChecked>
                            </CheckBox>
                        </StackPanel>

                        <TextBlock Text="Text Color:" Margin="0,12,0,4"/>
                        <controls:ColorPicker SelectedColor="{Binding SelectedElement[Color], FallbackValue=#000000, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>

                        <!-- Advanced Text Properties -->
                        <TextBlock Text="Line Height:" Margin="0,12,0,4"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Slider Grid.Column="0"
                                   Minimum="0.5"
                                   Maximum="3"
                                   Value="{Binding SelectedElement[LineHeight], FallbackValue=1.2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   TickFrequency="0.1"
                                   IsSnapToTickEnabled="False"
                                   Margin="0,0,8,0"/>
                            <TextBox Grid.Column="1"
                                    Width="60"
                                    Text="{Binding SelectedElement[LineHeight], FallbackValue=1.2, StringFormat=F2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                        </Grid>

                        <TextBlock Text="Letter Spacing:" Margin="0,12,0,4"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Slider Grid.Column="0"
                                   Minimum="-5"
                                   Maximum="20"
                                   Value="{Binding SelectedElement[LetterSpacing], FallbackValue=0, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                   TickFrequency="1"
                                   IsSnapToTickEnabled="True"
                                   Margin="0,0,8,0"/>
                            <TextBox Grid.Column="1"
                                    Width="60"
                                    Text="{Binding SelectedElement[LetterSpacing], FallbackValue=0, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                        </Grid>

                        <TextBlock Text="Text Decoration:" Margin="0,12,0,4"/>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Content="Underline" IsChecked="{Binding SelectedElement[TextDecoration_Underline], FallbackValue=False, Mode=TwoWay}" Margin="0,0,12,0"/>
                            <CheckBox Content="Strikethrough" IsChecked="{Binding SelectedElement[TextDecoration_Strikethrough], FallbackValue=False, Mode=TwoWay}"/>
                        </StackPanel>
                    </StackPanel>

                    <Separator Margin="0,16"/>

                    <!-- Rectangle/Shape Properties -->
                    <StackPanel Visibility="{Binding SelectedElement.Type, Converter={StaticResource ElementTypeToVisibilityConverter}, ConverterParameter='rectangle,shape,circle'}">
                        <TextBlock Text="Shape Properties" FontWeight="SemiBold" Margin="0,0,0,8"/>

                        <TextBlock Text="Fill Color:" Margin="0,4,0,2"/>
                        <controls:ColorPicker SelectedColor="{Binding SelectedElement[FillColor], FallbackValue=#ADD8E6, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>

                        <TextBlock Text="Border Color:" Margin="0,12,0,4"/>
                        <controls:ColorPicker SelectedColor="{Binding SelectedElement[BorderColor], FallbackValue=#00008B, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>

                        <TextBlock Text="Border Thickness:" Margin="0,12,0,4"/>
                        <TextBox Text="{Binding SelectedElement[BorderThickness], FallbackValue=2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    </StackPanel>

                    <Separator Margin="0,16"/>

                    <!-- Image Properties -->
                    <StackPanel>
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedElement.Type}" Value="image">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock Text="Image Properties" FontWeight="SemiBold" Margin="0,0,0,8"/>

                        <!-- Image Source with Browse Button -->
                        <TextBlock Text="Image Source:" Margin="0,4,0,2"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBox Grid.Column="0"
                                     Text="{Binding SelectedElement[Source], Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     IsReadOnly="True"
                                     Margin="0,0,8,0"
                                     ToolTip="Path to the image file"/>

                            <Button Grid.Column="1"
                                    Content="Browse..."
                                    Width="80"
                                    Padding="8,4"
                                    Command="{Binding BrowseImageCommand}"
                                    CommandParameter="{Binding SelectedElement}"
                                    ToolTip="Browse media library to select an image"/>
                        </Grid>

                        <!-- Stretch Mode -->
                        <TextBlock Text="Stretch Mode:" Margin="0,12,0,4"/>
                        <ComboBox SelectedValue="{Binding SelectedElement[Stretch], FallbackValue=Uniform, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                 ToolTip="How the image should be stretched to fill the container">
                            <ComboBoxItem Content="None" Tag="None"/>
                            <ComboBoxItem Content="Fill" Tag="Fill"/>
                            <ComboBoxItem Content="Uniform" Tag="Uniform" IsSelected="True"/>
                            <ComboBoxItem Content="Uniform to Fill" Tag="UniformToFill"/>
                        </ComboBox>

                        <!-- Image Preview -->
                        <TextBlock Text="Preview:" Margin="0,12,0,4" FontWeight="SemiBold"/>
                        <Border BorderBrush="#CCCCCC"
                                BorderThickness="1"
                                Background="#F5F5F5"
                                Height="150"
                                Margin="0,4,0,0">
                            <Grid>
                                <TextBlock Text="No image selected"
                                           Foreground="#999999"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Visibility" Value="Visible"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SelectedElement[Source]}" Value="">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding SelectedElement[Source]}" Value="{x:Null}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                                <Image Source="{Binding SelectedElement[Source]}"
                                       Stretch="Uniform"
                                       Margin="4">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property="Visibility" Value="Visible"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SelectedElement[Source]}" Value="">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding SelectedElement[Source]}" Value="{x:Null}">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </Grid>
                        </Border>
                    </StackPanel>

                    <Separator Margin="0,16"/>

                    <!-- QR Code Properties -->
                    <StackPanel>
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedElement.Type}" Value="qrcode">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <TextBlock Text="QR Code Properties" FontWeight="SemiBold" Margin="0,0,0,8"/>

                        <TextBlock Text="Content/Data:" Margin="0,4,0,2"/>
                        <TextBox Text="{Binding SelectedElement[Content], UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                Height="60"
                                TextWrapping="Wrap"
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"
                                ToolTip="The data to encode in the QR code (URL, text, etc.)"/>

                        <TextBlock Text="Foreground Color:" Margin="0,12,0,4"/>
                        <controls:ColorPicker SelectedColor="{Binding SelectedElement[ForegroundColor], FallbackValue=#000000, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                ToolTip="QR code pattern color (default: black)"/>

                        <TextBlock Text="Background Color:" Margin="0,12,0,4"/>
                        <controls:ColorPicker SelectedColor="{Binding SelectedElement[BackgroundColor], FallbackValue=#FFFFFF, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                ToolTip="QR code background color (default: white)"/>

                        <TextBlock Text="Error Correction Level:" Margin="0,12,0,4"/>
                        <ComboBox SelectedValue="{Binding SelectedElement[ErrorCorrectionLevel], FallbackValue=M, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                 ToolTip="Error correction capability (L=7%, M=15%, Q=25%, H=30%)">
                            <ComboBoxItem Content="L - Low (7%)" Tag="L"/>
                            <ComboBoxItem Content="M - Medium (15%)" Tag="M" IsSelected="True"/>
                            <ComboBoxItem Content="Q - Quartile (25%)" Tag="Q"/>
                            <ComboBoxItem Content="H - High (30%)" Tag="H"/>
                        </ComboBox>

                        <TextBlock Text="Preview:" Margin="0,12,0,4" FontWeight="SemiBold"/>
                        <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="8" Background="White" Margin="0,4,0,0">
                            <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="#666666">
                                <Run Text="QR code will be generated"/>
                                <LineBreak/>
                                <Run Text="based on the Content/Data"/>
                                <LineBreak/>
                                <Run Text="and displayed on the client."/>
                            </TextBlock>
                        </Border>
                    </StackPanel>

                    <Separator Margin="0,16"/>

                    <TextBlock Text="Actions:" FontWeight="SemiBold" Margin="0,8,0,8"/>
                    <Button Content="Duplicate Element" Command="{Binding DuplicateSelectedElementCommand}" Margin="0,0,0,4"/>
                    <Button Content="Delete Element" Command="{Binding DeleteSelectedElementCommand}" Style="{StaticResource SecondaryButton}"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Border>
</UserControl>
