<UserControl x:Class="DigitalSignage.Server.Views.Designer.DesignerToolbar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="50" d:DesignWidth="800"
             Background="#F8F9FA">
    <UserControl.Resources>
        <!-- Toolbar Button Style -->
        <Style x:Key="ToolbarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Width" Value="36"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E9ECEF"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#DEE2E6"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Separator Style -->
        <Style x:Key="ToolbarSeparatorStyle" TargetType="Separator">
            <Setter Property="Width" Value="1"/>
            <Setter Property="Margin" Value="8,8"/>
            <Setter Property="Background" Value="#DEE2E6"/>
        </Style>

        <!-- Icon Text Style -->
        <Style x:Key="IconTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="#212529"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>

    <Border BorderBrush="#DEE2E6" BorderThickness="0,0,0,1" Background="#F8F9FA">
        <StackPanel Orientation="Horizontal" Margin="8,4">

            <!-- File Operations -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding SaveLayoutCommand}"
                    ToolTip="Save Layout (Ctrl+S)">
                <TextBlock Text="&#xE74E;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Undo/Redo -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding UndoCommand}"
                    ToolTip="Undo (Ctrl+Z)">
                <TextBlock Text="&#xE7A7;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding RedoCommand}"
                    ToolTip="Redo (Ctrl+Y)">
                <TextBlock Text="&#xE7A6;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Clipboard Operations -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding CopyCommand}"
                    ToolTip="Copy (Ctrl+C)">
                <TextBlock Text="&#xE8C8;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding CutCommand}"
                    ToolTip="Cut (Ctrl+X)">
                <TextBlock Text="&#xE8C6;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding PasteCommand}"
                    ToolTip="Paste (Ctrl+V)">
                <TextBlock Text="&#xE77F;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding DuplicateSelectedCommand}"
                    ToolTip="Duplicate (Ctrl+D)">
                <TextBlock Text="&#xE8C8;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding DeleteSelectedCommand}"
                    ToolTip="Delete (Del)">
                <TextBlock Text="&#xE74D;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Alignment Tools -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding AlignLeftCommand}"
                    ToolTip="Align Left">
                <TextBlock Text="&#xE8E4;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding CenterHorizontalCommand}"
                    ToolTip="Center Horizontal">
                <TextBlock Text="&#xE8E3;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding AlignRightCommand}"
                    ToolTip="Align Right">
                <TextBlock Text="&#xE8E2;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding AlignTopCommand}"
                    ToolTip="Align Top">
                <TextBlock Text="&#xE8E5;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding CenterVerticalCommand}"
                    ToolTip="Center Vertical">
                <TextBlock Text="&#xE8E3;" Style="{StaticResource IconTextStyle}" RenderTransformOrigin="0.5,0.5">
                    <TextBlock.RenderTransform>
                        <RotateTransform Angle="90"/>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding AlignBottomCommand}"
                    ToolTip="Align Bottom">
                <TextBlock Text="&#xE8E6;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Distribution Tools -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding DistributeHorizontalCommand}"
                    ToolTip="Distribute Horizontal">
                <TextBlock Text="&#xE90F;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding DistributeVerticalCommand}"
                    ToolTip="Distribute Vertical">
                <TextBlock Text="&#xE90F;" Style="{StaticResource IconTextStyle}" RenderTransformOrigin="0.5,0.5">
                    <TextBlock.RenderTransform>
                        <RotateTransform Angle="90"/>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Z-Order Tools -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding BringToFrontCommand}"
                    ToolTip="Bring to Front">
                <TextBlock Text="&#xE74A;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding BringForwardCommand}"
                    ToolTip="Bring Forward">
                <TextBlock Text="&#xE898;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding SendBackwardCommand}"
                    ToolTip="Send Backward">
                <TextBlock Text="&#xE89A;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding SendToBackCommand}"
                    ToolTip="Send to Back">
                <TextBlock Text="&#xE74B;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Group/Ungroup -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding GroupSelectedCommand}"
                    ToolTip="Group (Ctrl+G)">
                <TextBlock Text="&#xE8F4;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding UngroupSelectedCommand}"
                    ToolTip="Ungroup (Ctrl+Shift+G)">
                <TextBlock Text="&#xE8F5;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- View Tools -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding ZoomInCommand}"
                    ToolTip="Zoom In (Ctrl++)">
                <TextBlock Text="&#xE8A3;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding ZoomOutCommand}"
                    ToolTip="Zoom Out (Ctrl+-)">
                <TextBlock Text="&#xE71F;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding ZoomToFitCommand}"
                    ToolTip="Zoom to Fit (Ctrl+0)">
                <TextBlock Text="&#xE71E;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Grid Configuration -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding OpenGridConfigCommand}"
                    ToolTip="Grid Settings">
                <TextBlock Text="&#xE8EC;" Style="{StaticResource IconTextStyle}"/>
            </Button>

            <!-- Show Grid Toggle -->
            <ToggleButton Style="{StaticResource ToolbarButtonStyle}"
                          IsChecked="{Binding ShowGrid}"
                          ToolTip="Show Grid">
                <TextBlock Text="&#xE80A;" Style="{StaticResource IconTextStyle}"/>
            </ToggleButton>

            <!-- Snap to Grid Toggle -->
            <ToggleButton Style="{StaticResource ToolbarButtonStyle}"
                          IsChecked="{Binding SnapToGrid}"
                          ToolTip="Snap to Grid">
                <TextBlock Text="&#xE7C4;" Style="{StaticResource IconTextStyle}"/>
            </ToggleButton>

            <Separator Style="{StaticResource ToolbarSeparatorStyle}"/>

            <!-- Help -->
            <Button Style="{StaticResource ToolbarButtonStyle}"
                    Command="{Binding ShowKeyboardShortcutsCommand}"
                    ToolTip="Keyboard Shortcuts (F1)">
                <TextBlock Text="&#xE897;" Style="{StaticResource IconTextStyle}"/>
            </Button>

        </StackPanel>
    </Border>
</UserControl>
