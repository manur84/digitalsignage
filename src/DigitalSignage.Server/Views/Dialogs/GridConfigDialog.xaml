<Window x:Class="DigitalSignage.Server.Views.Dialogs.GridConfigDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="clr-namespace:DigitalSignage.Server.Controls"
        mc:Ignorable="d"
        Title="Grid Configuration"
        Width="400"
        Height="350"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F5F5">

    <Window.Resources>
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#555555"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                               BorderThickness="{TemplateBinding BorderThickness}"
                               BorderBrush="{TemplateBinding BorderBrush}"
                               CornerRadius="4"
                               Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#005A9E"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#CCCCCC"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                               BorderThickness="{TemplateBinding BorderThickness}"
                               BorderBrush="{TemplateBinding BorderBrush}"
                               CornerRadius="4"
                               Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#AAAAAA"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Grid Size Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Grid Size" Style="{StaticResource SectionHeaderStyle}"/>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Grid Size (px):" Style="{StaticResource LabelStyle}"/>
                <Slider Grid.Column="1"
                       Minimum="5"
                       Maximum="50"
                       Value="{Binding GridSize}"
                       TickFrequency="5"
                       IsSnapToTickEnabled="True"
                       VerticalAlignment="Center"
                       Margin="8,0"/>
                <TextBlock Grid.Column="2"
                          Text="{Binding GridSize}"
                          MinWidth="30"
                          TextAlignment="Right"
                          Style="{StaticResource LabelStyle}"/>
            </Grid>
        </StackPanel>

        <!-- Grid Color Section -->
        <StackPanel Grid.Row="1" Margin="0,0,0,20">
            <TextBlock Text="Grid Color" Style="{StaticResource SectionHeaderStyle}"/>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Color:" Style="{StaticResource LabelStyle}"/>
                <controls:ColorPicker Grid.Column="1"
                                     SelectedColor="{Binding GridColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     Height="28"
                                     Margin="8,0,0,0"/>
            </Grid>
        </StackPanel>

        <!-- Grid Visibility Section -->
        <StackPanel Grid.Row="2" Margin="0,0,0,20">
            <TextBlock Text="Grid Visibility" Style="{StaticResource SectionHeaderStyle}"/>
            <CheckBox Content="Show Grid"
                     IsChecked="{Binding ShowGrid}"
                     FontSize="12"
                     Margin="0,0,0,8"/>
            <CheckBox Content="Snap to Grid"
                     IsChecked="{Binding SnapToGrid}"
                     FontSize="12"/>
        </StackPanel>

        <!-- Grid Style Section -->
        <StackPanel Grid.Row="3" Margin="0,0,0,20">
            <TextBlock Text="Grid Style" Style="{StaticResource SectionHeaderStyle}"/>
            <RadioButton Content="Dots"
                        IsChecked="{Binding IsDotGrid}"
                        GroupName="GridStyle"
                        FontSize="12"
                        Margin="0,0,0,8"/>
            <RadioButton Content="Lines"
                        IsChecked="{Binding IsLineGrid}"
                        GroupName="GridStyle"
                        FontSize="12"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="5"
                   Orientation="Horizontal"
                   HorizontalAlignment="Right"
                   Margin="0,10,0,0">
            <Button Content="Cancel"
                   Style="{StaticResource SecondaryButtonStyle}"
                   Width="80"
                   Margin="0,0,10,0"
                   Click="CancelButton_Click"/>
            <Button Content="Apply"
                   Style="{StaticResource PrimaryButtonStyle}"
                   Width="80"
                   Click="ApplyButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
